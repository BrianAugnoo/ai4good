<div class="custom-auth-container">
  <div class="custom-auth-card">

    <div class="auth-header">
      <h2>Bon retour !</h2>
      <p>Connectez-vous pour accéder à votre espace.</p>
    </div>

    <%= form_with(model: resource, scope: resource_name, url: session_path(resource_name), local: true, class: "auth-form") do |f| %>

      <%# --- GESTION SPÉCIALE ERREUR LOGIN --- %>
      <%# Devise renvoie souvent l'erreur de connexion dans le flash[:alert] %>
      <% if flash[:alert].present? %>
        <div class="login-error-banner">
          <i class="fa-solid fa-circle-exclamation"></i>
          <span><%= flash[:alert] %></span>
        </div>
      <% end %>

      <div class="form-group">
        <%= f.label :email, "Adresse email", class: "form-label" %>
        <%= f.email_field :email,
            autofocus: true,
            autocomplete: "email",
            placeholder: "exemple@email.com",
            class: "form-input #{'input-error' if resource.errors[:email].any?}" %>

        <%# Erreur spécifique au champ email (rare au login, mais prévu) %>
        <% if resource.errors[:email].any? %>
          <span class="field-error"><%= resource.errors[:email].first %></span>
        <% end %>
      </div>

      <div class="form-group">
        <div class="label-row">
          <%= f.label :password, "Mot de passe", class: "form-label" %>
        </div>

        <%= f.password_field :password,
            autocomplete: "current-password",
            placeholder: "••••••••",
            class: "form-input #{'input-error' if resource.errors[:password].any?}" %>

        <%# Erreur spécifique au mot de passe %>
        <% if resource.errors[:password].any? %>
          <span class="field-error"><%= resource.errors[:password].first %></span>
        <% end %>
      </div>

      <% if devise_mapping.rememberable? %>
        <div class="form-group checkbox-group">
          <%= f.check_box :remember_me, class: "form-checkbox" %>
          <%= f.label :remember_me, "Se souvenir de moi", class: "checkbox-label" %>
        </div>
      <% end %>

      <div class="form-actions">
        <%= f.submit "Se connecter", class: "btn-gradient" %>
      </div>
    <% end %>

    <div class="auth-footer">
      <%= render "examiners/shared/links" %>
    </div>
  </div>
</div>
